(()=>{"use strict";var e,t,s,o,a,r={749:(e,t,s)=>{s.a(e,(async(e,o)=>{try{s.d(t,{FO:()=>d,Jp:()=>p,Xh:()=>i,a1:()=>u,go:()=>c});var a=s(971),r=s(185),n=e([a]);async function c(e,t){try{const e=await a.U.getAll();e?t.json({status:"ok",message:"Lista de productos enviada correctamente",code:"200",products:e}):t.status(400).json({status:"nok",message:"No se encontraron productos",code:"400",products:null})}catch(e){t.json({error:e.message})}}async function d(e,t){try{let s=new r.Types.ObjectId(e.params.id);const o=await a.U.getById(s);o?t.json({status:"ok",message:"Producto enviado correctamente",code:"200",product:o}):t.status(400).json({status:"nok",message:"Producto no encontrado",code:"400",product:null})}catch(e){t.status(400).json({error:e.message})}}async function u(e,t){try{const s=e.body,o=await a.U.save(s);o?t.json({status:"ok",message:"Lista de productos entregada correctamente",code:"200",result:o}):t.status(400).json({status:"nok",message:"No se pudo devolver la lista de productos",code:"400",result:null})}catch(e){t.status(400).json({error:e.message})}}async function i(e,t){try{const s=e.body;let o=new r.Types.ObjectId(e.params.id);const n=await a.U.updateById(o,s);n?t.json({status:"ok",message:"Producto editado correctamente",code:"200",product:n}):t.status(400).json({status:"nok",message:"Error al editar el producto",code:"400",product:null})}catch(e){t.status(400).json({error:e.message})}}async function p(e,t){try{let s=new r.Types.ObjectId(e.params.id);await a.U.deleteById(s)?t.json({status:"ok",message:"Producto Eliminado correctamente",code:"200"}):t.status(400).json({status:"nok",message:"No se elimino o no se encontro el producto",code:"400"})}catch(e){t.status(400).json({error:e.message})}}a=(n.then?(await n)():n)[0],o()}catch(l){o(l)}}))},990:(e,t,s)=>{s.a(e,(async(e,o)=>{try{s.d(t,{Dg:()=>p,FO:()=>d,Jp:()=>i,a1:()=>u,gg:()=>l,go:()=>c});var a=s(971),r=s(185),n=e([a]);async function c(e,t){try{const e=await a.s.getAll();e?t.json({status:"ok",message:"Carrito de compras enviado correctamente",code:"200",shoppingCart:e}):t.status(400).json({status:"nok",message:"No se encontraron el carrito de compras",code:"400",shoppingCart:null})}catch(e){t.json({error:e.message})}}async function d(e,t){try{let s=new r.Types.ObjectId(e.params.id);const o=await a.s.getById(s);o?t.json({status:"ok",message:"Carrito enviado correctamente",code:"200",shoppingCart:o}):t.status(400).json({status:"nok",message:"carrito no encontrado",code:"400",shoppingCart:null})}catch(e){t.status(400).json({error:e.message})}}async function u(e,t){try{const s=e.body,o=await a.s.save(s);o?t.json({status:"ok",message:"Se salvo corretamente el carrito de compras",code:"200",result:o}):t.status(400).json({status:"nok",message:"No se pudo salvar los datos del carrito",code:"400",result:null})}catch(e){t.status(400).json({error:e.message})}}async function i(e,t){try{let s=new r.Types.ObjectId(e.params.id);await a.s.deleteById(s)?t.json({status:"ok",message:"Carrito de compras Eliminado correctamente",code:"200"}):t.status(400).json({status:"nok",message:"No se elimino o no se encontro el carrito de compras",code:"400"})}catch(e){t.status(400).json({error:e.message})}}async function p(e,t){try{let s=new r.Types.ObjectId(e.params.id);const o=(await a.s.getById(s)).productos;o?t.json({status:"ok",message:"Se envio correctamente la lista de productos",code:"200",result:o}):t.status(400).json({status:"nok",message:"No se pudo enviar la lista de productos del carrito",code:"400",result:null})}catch(e){t.status(400).json({error:e.message})}}async function l(e,t){try{let s=new r.Types.ObjectId(e.params.id),o=new r.Types.ObjectId(e.body.id);const n=await a.U.getById(o),c=await a.s.getById(s);await c.product.save(n)?t.json({status:"ok",message:"El producto se agrego correctamente al carrito",code:"200"}):t.json({status:"nok",message:"Error al agregar un producto al carrito",code:"400"})}catch(e){t.status(400).json({error:e.message})}}a=(n.then?(await n)():n)[0],o()}catch(m){o(m)}}))},711:(e,t,s)=>{function o(e,t,s){s()}s.d(t,{m:()=>o})},62:(e,t,s)=>{s.a(e,(async(e,o)=>{try{s.d(t,{Z:()=>u});var a=s(860),r=s(711),n=s(749),c=e([n]);n=(c.then?(await c)():c)[0];const d=(0,a.Router)();d.get("/",n.go),d.get("/:id",n.FO),d.post("/",r.m,n.a1),d.put("/:id",r.m,n.Xh),d.delete("/:id",r.m,n.Jp);const u=d;o()}catch(e){o(e)}}))},234:(e,t,s)=>{s.a(e,(async(e,o)=>{try{s.d(t,{Z:()=>d});var a=s(860),r=s(990),n=e([r]);r=(n.then?(await n)():n)[0];const c=(0,a.Router)();c.get("/",r.go),c.get("/:id",r.FO),c.post("/",r.a1),c.delete("/:id",r.Jp),c.get("/:id/productos",r.Dg),c.post("/:id/productos",r.gg);const d=c;o()}catch(e){o(e)}}))},971:(e,t,s)=>{s.a(e,(async(e,o)=>{try{s.d(t,{U:()=>e,s:()=>r});var a=s(142);let e,r;switch(s.n(a)().config(),process.env.DATABASE){case"firebase":const{default:t}=await s.e(419).then(s.bind(s,419)),{default:o}=await s.e(461).then(s.bind(s,461));e=new t,r=new o;break;case"mongoDB":const{default:a}=await s.e(986).then(s.bind(s,986));e=new a;const{default:n}=await s.e(678).then(s.bind(s,678));r=new n}o()}catch(e){o(e)}}),1)},607:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var o=s(860),a=s.n(o),r=s(62),n=s(234),c=e([r,n]);[r,n]=c.then?(await c)():c;const d=a()();d.use(a().json()),d.use(a().urlencoded({extended:!0})),d.use(a().static("public")),d.use("/api/productos",r.Z),d.use("/api/carrito",n.Z),d.use(((e,t)=>{const s={error:-2,descripcion:`ruta: ${e.url} metodo: ${e.method} no implementado`};t.status(404).json(s)}));const u=process.env.PORT||8080;d.listen(u,(()=>{console.log("Servidor corriendo en el puerto 8080")})),t()}catch(e){t(e)}}))},142:e=>{e.exports=require("dotenv")},860:e=>{e.exports=require("express")},509:e=>{e.exports=require("firebase-admin")},185:e=>{e.exports=require("mongoose")}},n={};function c(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return r[e](s,s.exports,c),s.exports}c.m=r,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(a,r,n)=>{var c;n&&((c=[]).d=1);var d,u,i,p=new Set,l=a.exports,m=new Promise(((e,t)=>{i=t,u=e}));m[t]=l,m[e]=e=>(c&&e(c),p.forEach(e),m.catch((e=>{}))),a.exports=m,r((a=>{var r;d=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var r=[];r.d=0,a.then((e=>{n[t]=e,o(r)}),(e=>{n[s]=e,o(r)}));var n={};return n[e]=e=>e(r),n}}var c={};return c[e]=e=>{},c[t]=a,c})))(a);var n=()=>d.map((e=>{if(e[s])throw e[s];return e[t]})),u=new Promise((t=>{(r=()=>t(n)).r=0;var s=e=>e!==c&&!p.has(e)&&(p.add(e),e&&!e.d&&(r.r++,e.push(r)));d.map((t=>t[e](s)))}));return r.r?u:n()}),(e=>(e?i(m[s]=e):u(l),o(c)))),c&&(c.d=0)},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var s in t)c.o(t,s)&&!c.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,s)=>(c.f[s](e,t),t)),[])),c.u=e=>e+".main.js",c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a={179:1},c.f.require=(e,t)=>{a[e]||(e=>{var t=e.modules,s=e.ids,o=e.runtime;for(var r in t)c.o(t,r)&&(c.m[r]=t[r]);o&&o(c);for(var n=0;n<s.length;n++)a[s[n]]=1})(require("./"+c.u(e)))},c(607)})();